<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body style="overflow: hidden; cursor: none; background-color: black;">
<script>
'use strict';class l{constructor(a,b){this.x=void 0==a?0:a;this.y=void 0==b?0:b}length(){return Math.hypot(this.x,this.y)}clone(){return new l(this.x,this.y)}};function q(a,b){b|=0;return((a|0)%b+b)%b}function r(a,b,c){return a<b?Math.min(b,a+c):Math.max(b,a-c)};function aa(a,b,c){let d=document.createElement("div");d.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;");a.c=document.createElement("canvas");a.c.width=b;a.c.height=c;a.c.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;image-rendering: optimizeSpeed;image-rendering: pixelated;image-rendering: -moz-crisp-edges;");d.appendChild(a.c);document.body.appendChild(d);a.u=a.c.getContext("2d");a.u.imageSmoothingEnabled=!1;t(a)}
function t(a){var b=window.innerWidth,c=window.innerHeight;a=a.c;var d=Math.min(b/a.width|0,c/a.height|0);let e=a.width*d;d*=a.height;c=String(c/2-d/2|0)+"px";b=String(b/2-e/2|0)+"px";a.style.width=String(e|0)+"px";a.style.height=String(d|0)+"px";a.style.top=c;a.style.left=b}function w(a,b,c,d){b=void 0==b?255:b;c=void 0==c?b:c;b="rgba("+String(b|0)+","+String(c|0)+","+String((void 0==d?c:d)|0)+",1";a.u.fillStyle=b;a.u.strokeStyle=b}
function C(a,b,c,d,e,f,g,k,h,p,m){if(!(null==b||0>=e||0>=f)){var n=a.u;g+=a.a.x;k+=a.a.y;c|=0;d|=0;e|=0;f|=0;g|=0;k|=0;h|=0;p|=0;m|=0;0!=m&&n.save();0!=(m&1)&&(n.translate(h,0),n.scale(-1,1),g*=-1);0!=(m&2)&&(n.translate(0,p),n.scale(1,-1),k*=-1);n.drawImage(b,c,d,e,f,g,k,h,p);0!=m&&n.restore()}}
class ba{constructor(a,b,c){this.u=this.c=null;aa(this,a,b);this.width=a;this.height=b;window.addEventListener("resize",()=>t(this));this.a=new l(0,0);this.s=null==c?{}:c}clear(a,b,c){this.u.fillStyle="rgba("+String(a|0)+","+String(b|0)+","+String(c|0)+",1";this.u.fillRect(0,0,this.width,this.height)}fillRect(a,b,c,d){a+=this.a.x;b+=this.a.y;this.u.fillRect(a|0,b|0,c|0,d|0)}moveTo(a,b){this.a=new l(a,b)}move(a,b){this.a.x+=a;this.a.y+=b}};function D(a,b){if(null==b)for(b=0;b<a.buttons.length;++b)a.buttons[b]=E;else for(let c=0;c<b.buttons.length;++c){if(c>=a.buttons.length)for(let d=0;d<c-a.buttons.length;++d)a.buttons.push(E);a.buttons[c]=b.buttons[c].pressed?a.buttons[c]==E||a.buttons[c]==F?J:K:a.buttons[c]==K||a.buttons[c]==J?F:E}}
function M(a,b){null!=b&&(a.g.x=0,a.g.y=0,.05<Math.hypot(b.axes[0],b.axes[1])&&(a.g.x=b.axes[0],a.g.y=b.axes[1]),8<=b.axes.length&&.1>Math.hypot(a.g.x,a.g.y)&&.05<Math.hypot(b.axes[6],b.axes[7])&&(a.g.x=b.axes[6],a.g.y=b.axes[7]))}function N(a,b){return null==b||0>b||b>=a.buttons.length?E:a.buttons[b]}
class ca{constructor(){this.g=new l(0,0);this.buttons=[];this.a=null;this.index=0;window.addEventListener("gamepadconnected",a=>{console.log("Gamepad with index "+String(a.gamepad.index)+" connected.");let b=navigator.getGamepads()[a.gamepad.index];this.index=a.gamepad.index;a=this.a=b;M(this,a);D(this,a)})}};var E=0,F=2,K=1,J=3;function P(a,b,c,d,e){a.actions[b]={state:E,key:c,P:d,ga:e};a.f[c]=!0;return a}
function da(a){var b=a.c;b.g.x=0;b.g.y=0;if(null!=b.a){var c=navigator;c=null==c?null:c.getGamepads?c.getGamepads():c.webkitGetGamepads?c.webkitGetGamepads:null;null!=c&&(b.a=c[b.index])}c=b.a;M(b,c);D(b,c);for(let d in a.actions)a.actions[d].state=a.a[a.actions[d].key]|E,a.actions[d].state==E&&(null!=a.actions[d].P&&(a.actions[d].state=N(a.c,a.actions[d].P)),a.actions[d].state==E&&null!=a.actions[d].ga&&(a.actions[d].state=N(a.c,a.actions[d].ga)));a.aa=a.g.clone();b=a.g;b.x=0;b.y=0;.1<a.c.g.length()&&
(a.g=a.c.g.clone());a.actions.right.state&1?a.g.x=1:a.actions.left.state&1&&(a.g.x=-1);a.actions.down.state&1?a.g.y=1:a.actions.up.state&1&&(a.g.y=-1);a.ma=new l(a.g.x-a.aa.x,a.g.y-a.aa.y)}
class ea{constructor(){this.a={};this.f={};this.actions={};this.c=new ca;this.g=new l(0,0);this.aa=new l(0,0);this.ma=new l(0,0);window.addEventListener("keydown",a=>{var b=a.code;this.a[b]!=K&&(this.a[b]=J);this.f[b]&&a.preventDefault()});window.addEventListener("keyup",a=>{var b=a.code;this.a[b]!=E&&(this.a[b]=F);this.f[b]&&a.preventDefault()});window.addEventListener("contextmenu",a=>{a.preventDefault()});window.addEventListener("mousemove",()=>{window.focus()});window.addEventListener("mousedown",
()=>{window.focus()})}ia(){var a=this.a;for(let b in a)a[b]==J?a[b]=K:a[b]==F&&(a[b]=E)}};class Q{constructor(){}refresh(){}sa(){}};class fa{constructor(a,b){this.data=b;this.a=null}play(a,b){null!=this.a&&(this.a.disconnect(),this.a=null);let c=a.createBufferSource();c.buffer=this.data;c.connect(b).connect(a.destination);c.start(0);this.a=c}};function R(a,b,c,d){return a.I[b][q(d,a.height)*a.width+q(c,a.width)]}
class ha{constructor(a){a=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("map")[0];this.width=String(a.getAttribute("width"));this.height=String(a.getAttribute("height"));let b=a.getElementsByTagName("layer");this.I=[];let c=9999;for(var d of b)d.id<c&&(c=d.id);for(let f=0;f<b.length;++f){d=b[f].id-c;var e=b[f].getElementsByTagName("data")[0].childNodes[0].nodeValue.replace(/(\r\n|\n|\r)/gm,"");e=e.split(",");this.I[d]=[];for(let g=0;g<e.length;++g)this.I[d][g]=parseInt(e[g])}this.a=
{};a=a.getElementsByTagName("properties")[0];if(void 0!=a)for(let f of a.getElementsByTagName("property"))void 0!=f.getAttribute("name")&&(this.a[f.getAttribute("name")]=f.getAttribute("value"))}};function ja(a,b){S(a,b,"json",c=>{c=JSON.parse(c);for(let d in c.bitmaps)ka(a,c.bitmaps[d].name,c.bitmapPath+c.bitmaps[d].path);for(let d in c.tilemaps)la(a,c.tilemaps[d].name,c.tilemapPath+c.tilemaps[d].path);for(let d in c.samples)ma(a,c.samples[d].name,c.samplePath+c.samples[d].path)})}
function S(a,b,c,d){let e=new XMLHttpRequest;e.overrideMimeType("text/"+c);e.open("GET",b,!0);++a.total;e.onreadystatechange=()=>{4==e.readyState&&("200"==String(e.status)&&void 0!=d&&d(e.responseText),++a.loaded)};e.send(null)}function ka(a,b,c){++a.total;let d=new Image;d.onload=()=>{++a.loaded;a.s[b]=d};d.src=c}function la(a,b,c){++a.total;S(a,c,"xml",d=>{a.na[b]=new ha(d);++a.loaded})}
function ma(a,b,c){++a.total;var d=new XMLHttpRequest;d.open("GET",c,!0);d.responseType="arraybuffer";d.onload=()=>{a.a.u.decodeAudioData(d.response,e=>{++a.loaded;a.ta[b]=new fa(a.a,e)})};d.send()}function T(a){return 0==a.total||a.loaded>=a.total}class na{constructor(a){this.s={};this.na={};this.ta={};this.loaded=this.total=0;this.a=a}load(a){ja(this,a)}};class oa{constructor(){this.u=new AudioContext;this.a=this.u.createGain()}};function U(a,b){const c=16.66667*a.a.step;a.c+=b-a.o;a.c=Math.min(5*c,a.c);a.o=b;b=a.c/c|0;let d=!0,e=T(a.H);e&&!a.j&&(a.f=new a.i.prototype.constructor(a.a,null),a.i=null,a.j=!0);for(;0<b--;)d&&da(a.a.input),e&&a.f.refresh(a.a),d&&(a.a.input.ia(),d=!1),a.c-=c;T(a.H)?a.f.sa(a.l):a.l.clear(0,0,0);window.requestAnimationFrame(f=>U(a,f))}
class pa{constructor(a,b,c){this.c=this.o=0;this.audio=new oa;this.H=new na(this.audio);this.l=new ba(a,b,this.H.s);this.a={step:c+1,H:this.H,audio:this.audio,input:P(P(P(P(new ea,"left","ArrowLeft",14,null),"up","ArrowUp",12,null),"right","ArrowRight",15,null),"down","ArrowDown",13,null)};this.f=new Q(this.a,null);this.j=!1;this.i=this.f}};function V(a,b,c,d,e,f){b|=0;c|=0;d|=0;e|=0;if(c==d)a.f=0,a.a=c,a.c=b;else{a.c!=b&&(a.f=0,a.a=d>c?c:d,a.c=b);if(c<d&&a.a<c||c>d&&a.a>c)a.a=c;a.f+=f;a.f>e&&(c<d?++a.a>d&&(a.a=c):--a.a<d&&(a.a=c),a.f-=e)}}function W(a,b,c){a.a=b;a.c=c;a.f=0}class X{constructor(a,b){this.width=a;this.height=b;this.f=this.c=this.a=0}};function qa(a,b){a.i&&(a.Y?(a.i=!1,a.Y=!1):(a.Z=a.b.clone(),a.ka(b),a.speed.x=r(a.speed.x,a.target.x,a.A.x*b.step),a.speed.y=r(a.speed.y,a.target.y,a.A.y*b.step),a.b.x+=a.speed.x*b.step,a.b.y+=a.speed.y*b.step,a.ia()))}function Y(a,b,c,d,e){let f=a.b.x+a.f.x-a.j.x/2,g=a.b.y+a.f.y-a.j.y/2;return f+a.j.x>=b&&f<b+d&&g+a.j.y>=c&&g<c+e}function Z(a){var b=a.speed;b.x=0;b.y=0;a=a.target;a.x=0;a.y=0}
class ra{constructor(a,b){this.b=new l(a,b);this.Z=this.b.clone();this.speed=new l(0,0);this.target=this.speed.clone();this.A=new l(1,1);this.f=new l(0,0);this.j=new l(0,0);this.i=!0;this.Y=!1}ka(){}ia(){}ba(){}};function sa(a,b,c,d){if(!(a.da||!a.i||a.Y||0>a.speed.y)){var e=a.b.x+a.f.x-a.o.x/2;e+a.o.x<=b+1||e>=b+16-1||(b=a.f.y+a.o.y/2,e=a.Z.y+b,a.b.y+b>=c-1*d.step&&e<=c+(2+a.speed.y)*d.step&&(a.b.y=c-b,a.pa(),a.speed.y=0))}}
function ta(a,b,c,d,e){if(!(a.da||!a.i||a.Y||0>a.speed.x*d)){var f=a.b.y+a.f.y-a.o.y/2;if(!(f+a.o.y<=c+1||f>=c+16-1)){c=a.f.x+a.o.x/2*d;f=a.Z.x+c;var g=a.b.x+c;if(0<d&&g>=b-1*e.step&&f<=b+(2+a.speed.x)*e.step||0>d&&g<=b+1*e.step&&f>=b-(2-a.speed.x)*e.step)a.b.x=b-c,a.la(d,e),a.speed.x=0}}}class ua extends ra{constructor(a,b){super(a,b);this.o=this.j.clone();this.da=!1}pa(){}la(){}oa(){}};class va extends ua{constructor(){super(0,0);this.h=new X(16,16);this.a=!1;this.c=0;this.l=null;this.m=0;this.A=new l(.1,.1);this.o=new l(4,4);this.j=new l(8,8);this.i=!1}ka(a){let b=new l(this.b.x-this.l.b.x,this.b.y-this.l.b.y),c=b.length();{let d=b.length();1E-4>d?(b.x=0,b.y=0):(b.x/=d,b.y/=d,b.clone())}this.a?(this.target.x=-b.x*this.m,this.target.y=-b.y*this.m,8>c&&(this.i=!1)):0>=(this.c-=a.step)&&(this.a=!0);V(this.h,5,1,4,4,a.step);this.da=this.a}ba(a){if(this.i){var b=this.h,c=b.width,d=
b.height;C(a,a.s.figure,b.width*b.a,b.height*b.c,c,d,this.b.x-8|0,this.b.y-8|0,c,d,0<=this.speed.x?0:1)}}la(){this.a||(this.c=0,this.a=!0)}};class wa{constructor(a,b,c,d,e,f,g,k){this.b=new l(a,b);this.target=this.b.clone();this.v=this.b.clone();this.width=c;this.height=d;this.X=!1;this.ha=this.a=0;this.i=e;this.j=f;this.c=g;this.f=k}move(a,b,c){this.X||!this.c&&(0==this.b.x&&0>a||this.b.x==this.i-1&&0<a)||!this.f&&(0==this.b.y&&0>b||this.b.y==this.j-1&&0<b)||(this.a=1,this.ha=c,this.target.x=this.b.x+a|0,this.target.y=this.b.y+b|0,this.X=!0)}setPosition(a,b){this.b=new l(a,b);this.target=this.b.clone();this.v=this.b.clone()}};const xa=[1,4,8,2,9,6,3,5,12,10,7,13,14,11,15];
function ya(a,b,c){var d=b.b.x/16|0,e=b.b.y/16|0;let f=d-2,g=e-2;d+=4;e+=4;for(let G=0;G<a.a.I.length-1;++G)for(let B=g;B<=e;++B)for(let v=f;v<=d;++v){var k=R(a.a,G,v,B);if(0!=k){var h=a.i.I[0][k-1];if(null!=h)if(0<h&&h<=xa.length){k=b;var p=v,m=B,n=c,x=xa[h-1|0];1==(x&1)&&sa(k,16*p,16*m,n);if(8==(x&8)){h=k;var u=16*p,y=16*(m+1);if(!(h.da||!h.i||h.Y||0<h.speed.y)){var z=h.b.x+h.f.x-h.o.x/2;z+h.o.x<=u+1||z>=u+16-1||(u=h.f.y-h.o.y/2,z=h.Z.y+u,h.b.y+u<=y+1*n.step&&z>=y-(2-h.speed.y)*n.step&&(h.b.y=y-
u,h.oa(),h.speed.y=0))}}4==(x&4)&&ta(k,16*(p+1),16*m,-1,n);2==(x&2)&&ta(k,16*p,16*m,1,n)}else switch(k=b,p=h-1,m=v,n=B,h=c,y=[2,0,2,8],x=[8,2,0,2],u=[12,8,12,8],z=[8,12,8,12],p){case 15:void 0!=k.W&&k.W(16*m,16*n,16,16,h);break;case 16:case 17:case 18:case 19:void 0!=k.ra&&k.ra(16*m+y[p-16],16*n+x[p-16],u[p-16],z[p-16],h);break;case 27:void 0!=k.W&&k.W(16*m+8,16*n,16,16,h);break;case 29:void 0!=k.ja&&k.ja(16*m,16*n+8,16,8,h);break;case 30:void 0!=k.ja&&k.ja(16*m,16*n,16,16,h);break;case 31:sa(k,16*
m,16*(n+1),h),void 0!=k.W&&k.W(16*m,16*n+8,16,8,h,4)}}}}class za{constructor(a){this.a=a.na.base;this.i=a.na.collisions;this.width=this.a.width;this.height=this.a.height;this.c=this.f=0}};function Aa(a,b){a.L=!1;a.a=20;Z(a);b?a.l||(a.speed.x=1.25*a.S,a.target.x=a.speed.x):a.a+=10;a.ea=b;a.B=0;a.C=0;a.fa=!0}
class Ba extends ua{constructor(a,b,c){super(a,b);this.h=new X(16,16);this.$=new X(16,16);this.m=0;this.A=new l(.1,.15);this.f=new l(0,2);this.j=new l(8,12);this.o=new l(6,12);this.J=!1;this.B=0;this.M=!1;this.F=0;this.O=this.T=this.l=!1;this.a=this.C=0;this.R=this.L=this.fa=!1;this.ca=0;this.K=this.ea=!1;this.U=0;this.G=!1;this.qa=this.D=0;this.c=new va;this.c.i=!1;this.S=1;this.V=this.N=0;this.progress=c}ka(a){this.T&&!this.l&&(this.T=!1);this.S=0==this.m?1:-1;var b=a.input.actions.fire2.state;
if(b=b==F||b==E)this.R&&b?(this.R=!1,this.ca=0,Aa(this,!0)):!this.ea&&0<this.a&&10>=this.a&&(this.a=0);if(!(0<this.a||this.K||0<this.V)){this.target.x=1*a.input.g.x;this.target.y=2;this.G&&(this.target.y*=.25);this.A=new l(.1,.15);a:{if(a.input.actions.fire2.state==J){if(!this.l&&!this.O&&!this.J&&.1<a.input.g.y){Z(this);this.speed.y=-3;this.target.y=4;this.A.y=.35;this.K=!0;this.U=0;b=!0;break a}if(this.L){Aa(this,!1);b=!0;break a}}b=!1}if(b=!b){if(null!=this.c&&this.c.i)b=!1;else if(b=0==this.m?
1:-1,a.input.actions.fire3.state==J){var c=this.c;c.b=new l(this.b.x+4*b,this.b.y+2);c.speed=new l(2*b,0);c.target=c.speed.clone();c.a=!1;c.c=24;c.l=this;c.m=c.speed.length();c.i=!0;this.c.Z.x=this.b.x;Z(this);this.a=30;this.fa=!1;this.C=this.B=0;b=!0}else b=!1;b=!b}if(b&&(this.O&&(this.A.x*=.5,this.A.y*=.25,this.target.x*=.5,this.target.y*=.25,this.G=!1,this.D=0),b=a.input.actions.fire1.state,this.l?(.1<a.input.g.x?this.m=0:-.1>a.input.g.x&&(this.m=1),this.target.y=.5*a.input.g.y,this.target.x=0,
b==J&&(.1>a.input.g.y&&(this.B=14),this.T=this.l=this.M=!1),b=!0):b=!1,!b))if(b=a.input.actions.fire1.state,b==J)if(this.J&&.1<a.input.g.y)this.C=20;else{if(this.J||0<this.F||!this.M||0<this.D)this.B=(this.M=!this.J&&0>=this.F&&0>=this.D)?8:14,this.J=!1,this.F=0,0<this.D&&(this.speed.x=-2*this.qa),this.G=!1,this.D=0,this.L=!0,b=a.audio,c=a.H.ta.jump,b.a.gain.value=.5,c.play(b.u,b.a)}else b==F&&(0<this.B?this.B=0:0<this.C&&(this.C=0))}0<this.B&&(this.speed.y=-2,this.O&&(this.speed.y*=.5),this.B-=a.step);
0<this.C&&(this.speed.x=2*this.S,this.target.x=this.speed.x,this.C-=a.step);0<this.F&&(this.F-=a.step);0<this.D&&(this.D-=a.step);0<this.a&&(this.a-=a.step,!this.ea&&this.fa&&0>=this.a&&(this.R=!0));0<this.U&&0>=(this.U-=a.step)&&(this.K=!1);this.R&&(this.ca=(this.ca+a.step)%20);0<this.N&&(0<this.V?this.V-=a.step:this.N-=a.step);0<this.V?W(this.h,0,5):this.K?(W(this.$,3,4),W(this.h,1,4)):0<this.a?(W(this.h,0,4),this.ea?V(this.$,4,7,8,4,a.step):W(this.$,2,4)):0<this.C?W(this.h,4,1):(.1<Math.abs(this.target.x)&&
(this.m=0>this.target.x?1:0),this.G?W(this.h,3,1):this.O?0<=this.speed.y&&.1<Math.abs(this.target.x)?V(this.h,3,0,1,10,a.step):(b=0>this.speed.y?2:0,W(this.h,b,3)):this.l?(3!=this.h.c||.1<Math.abs(this.target.y))&&V(this.h,3,3,4,10,a.step):this.J?.1>Math.abs(this.speed.x)&&.1>Math.abs(this.target.x)?W(this.h,0,0):(b=12-6*Math.abs(this.speed.x),V(this.h,0,1,4,b,a.step)):this.M&&0>this.speed.y?V(this.h,2,0,4,4,a.step):(b=0,.5>Math.abs(this.speed.y)?b=1:0<this.speed.y&&(b=2),W(this.h,b,1)));null!=this.c&&
qa(this.c,a);this.O=this.l=!1}ia(){this.G=this.J=!1}ba(a){if(!(0<this.N&&0!=Math.floor(this.N/2)%2)){var b=this.h.a;this.R&&0==Math.floor(this.ca/2)%2&&(b+=5);var c=Math.round(this.b.x-8),d=Math.round(this.b.y-7);if(0<this.a&&this.fa){var e=this.$,f=e.width,g=e.height;C(a,a.s.figure,e.width*e.a,e.height*e.c,f,g,c+12-24*this.m,d+1,f,g,this.m)}e=this.h;f=e.width;g=e.height;C(a,a.s.figure,e.width*b,e.height*this.h.c,f,g,c,d,f,g,this.m);this.K&&(b=this.$,e=b.width,f=b.height,C(a,a.s.figure,b.width*b.a,
b.height*b.c,e,f,c+3-6*this.m,d+7,e,f,this.m));null!=this.c&&this.c.ba(a)}}pa(){this.J=!0;this.M=!1;this.F=12;.1<this.speed.y&&(this.T=this.l=!1);this.L=!0;this.K&&0>=this.U&&(this.U=20);this.D=0;this.G=!1}la(a,b){!this.l&&!this.K&&0>=this.a&&!this.O&&0<this.speed.y&&.1<b.input.g.x*a&&(this.G=!0,this.D=15,this.qa=a)}oa(){this.B=0}W(a,b,c,d,e,f){if(!Y(this,a+4,b,c-8,d))return!1;if(this.T)return this.L=!0,void 0==f&&(this.l=!0),!0;c=0<e.input.g.y&&.25>=e.input.aa.y&&.25<e.input.ma.y;return 0>e.input.g.y&&
-.25<=e.input.aa.y&&-.25>e.input.ma.y||c?(this.T=this.l=this.L=!0,this.b.x=a+8,void 0!=f&&(this.b.y=b+f),Z(this),!0):!1}ja(a,b,c,d){return Y(this,a,b,c,d)?(this.O=!0,this.F=1,this.M=!1,this.C=0,this.L=!0):!1}ra(a,b,c,d){if(!(0<this.N))return Y(this,a,b,c,d)?(this.S=this.b.x<a+c/2?1:-1,this.m=0<this.S?0:1,this.N=60,this.V=30,this.target.x=0,this.speed.x=2*-this.S,this.l=!1,this.a=0,this.R=this.G=this.K=!1,a=this.progress,a.a=Math.max(0,a.a-2),!0):!1}};class Ca{constructor(a){this.a=null;this.progress=a}};class Da{constructor(){this.a=this.c=6}};class Ea extends Q{constructor(a,b){super(a,b);this.a=new za(a.H);this.c=new wa(0,0,160,144,this.a.width/10|0,this.a.height/9|0,!0,!1);this.progress=new Da;this.f=new Ca(this.progress);var c=this.a;{a=this.f;b=c.a.I[c.a.I.length-1];var d=c.width;c=c.height;let e;for(let f=0;f<c;++f)for(let g=0;g<d;++g)if(e=b[f*d+g]-512,!(0>=e))switch(--e,e){case 0:a.a=new Ba(16*g+8,16*f+8,a.progress)}}a=this.f;this.c.setPosition(a.a.b.x/160|0,a.a.b.y/144|0)}refresh(a){var b=this.a;b.f=(b.f+.5*a.step)%96;b.c=(b.c+
.125*a.step)%16;var c=this.f;b=this.c;var d=this.a;b.X||(qa(c.a,a),ya(d,c.a,a),null!=c.a.c&&ya(d,c.a.c,a));{c=c.a;d=b.b.x*b.width;var e=b.b.y*b.height,f=b.target.x-b.b.x;let g=b.target.y-b.b.y,k=(c.j.x+2)*b.ha,h=(c.j.y+2)*b.ha,p=0,m=0;b.X?(c.b.x+=f*k*a.step,c.b.y+=g*h*a.step):(0<c.speed.x&&c.b.x+c.f.x+c.j.x/2>d+b.width?p=1:0>c.speed.x&&c.b.x+c.f.x-c.j.x/2<d?p=-1:0<c.speed.y&&c.b.y+c.f.y+c.j.y/2>e+b.height?m=1:0>c.speed.y&&c.b.y+c.f.y-c.j.y/2<e&&(m=-1),0==p&&0==m||b.move(p,m,.05));if(d=null!=c.c&&
c.c.i)d=c.c,void 0==d.h?b=!1:(e=b.v.x*b.width,f=b.v.y*b.height,b=d.b.x+d.h.width/2>=e&&d.b.y+d.h.height/2>=f&&d.b.x-d.h.width/2<e+b.width&&d.b.y-d.h.height/2<f+b.height),d=!b;d&&(c.c.i=!1)}b=this.c;b.X&&(0>=(b.a-=b.ha*a.step)?(b.a=0,b.b=b.target.clone(),b.v=b.b.clone(),b.X=!1,b.c&&(b.b.x=q(b.b.x|0,b.i)),b.f&&(b.b.y=q(b.b.y|0,b.j))):(a=b.a,b.v.x=a*b.b.x+(1-a)*b.target.x,b.v.y=a*b.b.y+(1-a)*b.target.y))}sa(a){a.moveTo(0,0);var b=this.c,c=q(this.a.f+16*b.v.x,96);a.clear(85,170,255);C(a,a.s.background,
16,32,48,48,96,16,48,48,0);b=16*b.v.y|0;a.move(0,-b);for(var d=0;3>d;++d)C(a,a.s.background,0,0,96,32,Math.round(-c+96*d),96,96,32,0);w(a,255,255,255);a.fillRect(0,128,a.width,16);for(c=0;c<a.width/16|0;++c)C(a,a.s.background,0,32,16,32,16*c,144,16,32,0);w(a,0,85,170);a.fillRect(0,176,a.width,Math.max(0,a.height+b-176));a.move(0,b);c=this.c;a.moveTo(-Math.round(c.v.x*c.width),-Math.round(c.v.y*c.height));{c=this.a;d=this.c;b=(10*d.v.x|0)-1;let z=(9*d.v.y|0)-1,G=(a.width/16|0)+2,B=(a.height/16|0)+
2;for(let v=0;v<c.a.I.length-1;++v){{var e=void 0,f=void 0,g=void 0;d=c;var k=a,h=a.s.tileset,p=v,m=b,n=z,x=G,u=B;const Fa=[133];for(let H=n;H<n+u;++H)for(let I=m;I<m+x;++I)if(g=R(d.a,p,I,H),0!=g--)if(Fa.includes(g)){{let L,A;f=k;e=h;var y=I;let O=g%16|0,ia=g/16|0;switch(g){case 133:L=16*H+(1+Math.round(Math.sin(d.c/16*Math.PI*2))),A=d.c|0,A%2!=L%2&&++O,g=16-A,C(f,e,16*O+A,16*ia,g,16,16*y,L,g,16,0),0<A&&C(f,e,16*O,16*ia,A,16,16*(y+1)-A,L,A,16,0)}}}else f=g%16|0,e=g/16|0,C(k,h,16*f,16*e,16,16,16*I,
16*H,16,16,0)}}}this.f.a.ba(a);a.moveTo();c=a.s.font;for(d=0;d<this.progress.c;++d)b=9*(d/2|0),0==d%2&&C(a,c,40,0,8,8,1+b,1,8,8,void 0),this.progress.a>d&&C(a,c,32+d%2*4,0,4,8,1+b+d%2*4,1,4,8,void 0)}};window.onload=()=>{var a=new pa(160,144,0);a.H.load("assets/assets.json");var b=[{name:"fire1",key:"KeyZ",P:0},{name:"fire2",key:"KeyX",P:2},{name:"fire3",key:"KeyC",P:1},{name:"start",key:"Enter",P:9,ga:7},{name:"back",key:"Escape"}];for(let c of b)P(a.a.input,c.name,c.key,c.P,c.ga);a.i=Ea;a.j=!1;U(a,0)};
</script>
</body>
</html>
