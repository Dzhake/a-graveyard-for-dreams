'use strict';class m{constructor(a,b){this.x=void 0==a?0:a;this.y=void 0==b?0:b}length(){return Math.hypot(this.x,this.y)}clone(){return new m(this.x,this.y)}};function q(a,b){b|=0;return((a|0)%b+b)%b}function r(a,b,c){return a<b?Math.min(b,a+c):Math.max(b,a-c)};function aa(a,b,c){let d=document.createElement("div");d.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;");a.f=document.createElement("canvas");a.f.width=b;a.f.height=c;a.f.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;image-rendering: optimizeSpeed;image-rendering: pixelated;image-rendering: -moz-crisp-edges;");d.appendChild(a.f);document.body.appendChild(d);a.b=a.f.getContext("2d");a.b.imageSmoothingEnabled=!1;t(a)}
function t(a){var b=window.innerWidth,c=window.innerHeight;a=a.f;var d=Math.min(b/a.width|0,c/a.height|0);let e=a.width*d;d*=a.height;c=String(c/2-d/2|0)+"px";b=String(b/2-e/2|0)+"px";a.style.width=String(e|0)+"px";a.style.height=String(d|0)+"px";a.style.top=c;a.style.left=b}function w(a,b,c,d){b=void 0==b?255:b;c=void 0==c?b:c;b="rgba("+String(b|0)+","+String(c|0)+","+String((void 0==d?c:d)|0)+",1";a.b.fillStyle=b;a.b.strokeStyle=b}
function C(a,b,c,d,e,f,g,k,h,p,l){if(!(null==b||0>=e||0>=f)){var n=a.b;g+=a.a.x;k+=a.a.y;c|=0;d|=0;e|=0;f|=0;g|=0;k|=0;h|=0;p|=0;l|=0;0!=l&&n.save();0!=(l&1)&&(n.translate(h,0),n.scale(-1,1),g*=-1);0!=(l&2)&&(n.translate(0,p),n.scale(1,-1),k*=-1);n.drawImage(b,c,d,e,f,g,k,h,p);0!=l&&n.restore()}}
class ba{constructor(a,b,c){this.b=this.f=null;aa(this,a,b);this.width=a;this.height=b;window.addEventListener("resize",()=>t(this));this.a=new m(0,0);this.s=null==c?{}:c}clear(a,b,c){this.b.fillStyle="rgba("+String(a|0)+","+String(b|0)+","+String(c|0)+",1";this.b.fillRect(0,0,this.width,this.height)}fillRect(a,b,c,d){a+=this.a.x;b+=this.a.y;this.b.fillRect(a|0,b|0,c|0,d|0)}moveTo(a,b){this.a=new m(a,b)}move(a,b){this.a.x+=a;this.a.y+=b}};function D(a,b){if(null==b)for(b=0;b<a.buttons.length;++b)a.buttons[b]=E;else for(let c=0;c<b.buttons.length;++c){if(c>=a.buttons.length)for(let d=0;d<c-a.buttons.length;++d)a.buttons.push(E);a.buttons[c]=b.buttons[c].pressed?a.buttons[c]==E||a.buttons[c]==F?J:K:a.buttons[c]==K||a.buttons[c]==J?F:E}}
function M(a,b){null!=b&&(a.g.x=0,a.g.y=0,.05<Math.hypot(b.axes[0],b.axes[1])&&(a.g.x=b.axes[0],a.g.y=b.axes[1]),8<=b.axes.length&&.1>Math.hypot(a.g.x,a.g.y)&&.05<Math.hypot(b.axes[6],b.axes[7])&&(a.g.x=b.axes[6],a.g.y=b.axes[7]))}function N(a,b){return null==b||0>b||b>=a.buttons.length?E:a.buttons[b]}
class ca{constructor(){this.g=new m(0,0);this.buttons=[];this.a=null;this.index=0;window.addEventListener("gamepadconnected",a=>{if(null!=(navigator.getGamepads?navigator.getGamepads:navigator.a)){console.log("Gamepad with index "+String(a.a.index)+" connected.");var b=navigator.getGamepads()[a.a.index];this.index=a.a.index;a=this.a=b;M(this,a);D(this,a)}})}};var E=0,F=2,K=1,J=3;function P(a,b,c,d,e){a.actions[b]={state:E,key:c,O:d,fa:e};a.f[c]=!0;return a}
function da(a){var b=a.a;b.g.x=0;b.g.y=0;if(null!=b.a){var c=navigator;c=null==c?null:c.getGamepads?c.getGamepads():c.webkitGetGamepads?c.webkitGetGamepads:null;null!=c&&(b.a=c[b.index])}c=b.a;M(b,c);D(b,c);for(let d in a.actions)a.actions[d].state=a.b[a.actions[d].key]|E,a.actions[d].state==E&&(null!=a.actions[d].O&&(a.actions[d].state=N(a.a,a.actions[d].O)),a.actions[d].state==E&&null!=a.actions[d].fa&&(a.actions[d].state=N(a.a,a.actions[d].fa)));a.$=a.g.clone();b=a.g;b.x=0;b.y=0;.1<a.a.g.length()&&
(a.g=a.a.g.clone());a.actions.right.state&1?a.g.x=1:a.actions.left.state&1&&(a.g.x=-1);a.actions.down.state&1?a.g.y=1:a.actions.up.state&1&&(a.g.y=-1);a.la=new m(a.g.x-a.$.x,a.g.y-a.$.y)}
class ea{constructor(){this.b={};this.f={};this.actions={};this.a=new ca;this.g=new m(0,0);this.$=new m(0,0);this.la=new m(0,0);window.addEventListener("keydown",a=>{var b=a.code;this.b[b]!=K&&(this.b[b]=J);this.f[b]&&a.preventDefault()});window.addEventListener("keyup",a=>{var b=a.code;this.b[b]!=E&&(this.b[b]=F);this.f[b]&&a.preventDefault()});window.addEventListener("contextmenu",a=>{a.preventDefault()});window.addEventListener("mousemove",()=>{window.focus()});window.addEventListener("mousedown",
()=>{window.focus()})}ha(){var a=this.b;for(let b in a)a[b]==J?a[b]=K:a[b]==F&&(a[b]=E)}};class Q{constructor(){}refresh(){}ra(){}};function R(a,b,c,d){return a.H[b][q(d,a.height)*a.width+q(c,a.width)]}
class fa{constructor(a){a=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("map")[0];this.width=String(a.getAttribute("width"));this.height=String(a.getAttribute("height"));let b=a.getElementsByTagName("layer");this.H=[];let c=9999;for(var d of b)d.id<c&&(c=d.id);for(let f=0;f<b.length;++f){d=b[f].id-c;var e=b[f].getElementsByTagName("data")[0].childNodes[0].nodeValue.replace(/(\r\n|\n|\r)/gm,"");e=e.split(",");this.H[d]=[];for(let g=0;g<e.length;++g)this.H[d][g]=parseInt(e[g])}this.a=
{};a=a.getElementsByTagName("properties")[0];if(void 0!=a)for(let f of a.getElementsByTagName("property"))void 0!=f.getAttribute("name")&&(this.a[f.getAttribute("name")]=f.getAttribute("value"))}};function ha(a,b){S(a,b,"json",c=>{c=JSON.parse(c);for(let d in c.bitmaps)ia(a,c.bitmaps[d].name,c.bitmapPath+c.bitmaps[d].path);for(let d in c.tilemaps)ka(a,c.tilemaps[d].name,c.tilemapPath+c.tilemaps[d].path)})}function S(a,b,c,d){let e=new XMLHttpRequest;e.overrideMimeType("text/"+c);e.open("GET",b,!0);++a.total;e.onreadystatechange=()=>{4==e.readyState&&("200"==String(e.status)&&void 0!=d&&d(e.responseText),++a.loaded)};e.send(null)}
function ia(a,b,c){++a.total;let d=new Image;d.onload=()=>{++a.loaded;a.s[b]=d};d.src=c}function ka(a,b,c){++a.total;S(a,c,"xml",d=>{a.ma[b]=new fa(d);++a.loaded})}function T(a){return 0==a.total||a.loaded>=a.total}class la{constructor(){this.s={};this.ma={};this.loaded=this.total=0}load(a){ha(this,a)}};function U(a,b){const c=16.66667*a.a.step;a.b+=b-a.m;a.b=Math.min(5*c,a.b);a.m=b;b=a.b/c|0;let d=!0,e=T(a.G);e&&!a.j&&(a.f=new a.i.prototype.constructor(a.a,null),a.i=null,a.j=!0);for(;0<b--;)d&&da(a.a.input),e&&a.f.refresh(a.a),d&&(a.a.input.ha(),d=!1),a.b-=c;T(a.G)?a.f.ra(a.l):a.l.clear(0,0,0);window.requestAnimationFrame(f=>U(a,f))}
class ma{constructor(a,b,c){this.b=this.m=0;this.G=new la;this.l=new ba(a,b,this.G.s);this.a={step:c+1,G:this.G,input:P(P(P(P(new ea,"left","ArrowLeft",14,null),"up","ArrowUp",12,null),"right","ArrowRight",15,null),"down","ArrowDown",13,null)};this.f=new Q(this.a,null);this.j=!1;this.i=this.f}};function V(a,b,c,d,e,f){b|=0;c|=0;d|=0;e|=0;if(c==d)a.f=0,a.a=c,a.b=b;else{a.b!=b&&(a.f=0,a.a=d>c?c:d,a.b=b);if(c<d&&a.a<c||c>d&&a.a>c)a.a=c;a.f+=f;a.f>e&&(c<d?++a.a>d&&(a.a=c):--a.a<d&&(a.a=c),a.f-=e)}}function W(a,b,c){a.a=b;a.b=c;a.f=0}class X{constructor(a,b){this.width=a;this.height=b;this.f=this.b=this.a=0}};function na(a,b){a.m&&(a.X?(a.m=!1,a.X=!1):(a.Y=a.c.clone(),a.ja(b),a.speed.x=r(a.speed.x,a.target.x,a.v.x*b.step),a.speed.y=r(a.speed.y,a.target.y,a.v.y*b.step),a.c.x+=a.speed.x*b.step,a.c.y+=a.speed.y*b.step,a.ha()))}function Y(a,b,c,d,e){let f=a.c.x+a.f.x-a.i.x/2,g=a.c.y+a.f.y-a.i.y/2;return f+a.i.x>=b&&f<b+d&&g+a.i.y>=c&&g<c+e}function Z(a){var b=a.speed;b.x=0;b.y=0;a=a.target;a.x=0;a.y=0}
class oa{constructor(a,b){this.c=new m(a,b);this.Y=this.c.clone();this.speed=new m(0,0);this.target=this.speed.clone();this.v=new m(1,1);this.f=new m(0,0);this.i=new m(0,0);this.m=!0;this.X=!1}ja(){}ha(){}aa(){}};function pa(a,b,c,d){if(!(a.ca||!a.m||a.X||0>a.speed.y)){var e=a.c.x+a.f.x-a.l.x/2;e+a.l.x<=b+1||e>=b+16-1||(b=a.f.y+a.l.y/2,e=a.Y.y+b,a.c.y+b>=c-1*d.step&&e<=c+(2+a.speed.y)*d.step&&(a.c.y=c-b,a.oa(),a.speed.y=0))}}
function qa(a,b,c,d,e){if(!(a.ca||!a.m||a.X||0>a.speed.x*d)){var f=a.c.y+a.f.y-a.l.y/2;if(!(f+a.l.y<=c+1||f>=c+16-1)){c=a.f.x+a.l.x/2*d;f=a.Y.x+c;var g=a.c.x+c;if(0<d&&g>=b-1*e.step&&f<=b+(2+a.speed.x)*e.step||0>d&&g<=b+1*e.step&&f>=b-(2-a.speed.x)*e.step)a.c.x=b-c,a.ka(d,e),a.speed.x=0}}}class ra extends oa{constructor(a,b){super(a,b);this.l=this.i.clone();this.ca=!1}oa(){}ka(){}na(){}};class sa extends ra{constructor(a,b,c,d,e,f){super(a,b);this.speed=new m(c,d);this.target=this.speed.clone();this.h=new X(16,16);this.a=!1;this.b=e;this.j=f;this.o=this.speed.length();this.v=new m(.1,.1);this.l=new m(4,4);this.i=new m(8,8)}ja(a){let b=new m(this.c.x-this.j.c.x,this.c.y-this.j.c.y),c=b.length();{let d=b.length();1E-4>d?(b.x=0,b.y=0):(b.x/=d,b.y/=d,b.clone())}this.a?(this.target.x=-b.x*this.o,this.target.y=-b.y*this.o,8>c&&(this.m=!1)):0>=(this.b-=a.step)&&(this.a=!0);V(this.h,5,1,
4,4,a.step);this.ca=this.a}aa(a){if(this.m){var b=this.h,c=b.width,d=b.height;C(a,a.s.figure,b.width*b.a,b.height*b.b,c,d,this.c.x-8|0,this.c.y-8|0,c,d,0<=this.speed.x?0:1)}}ka(){this.a||(this.b=0,this.a=!0)}};class ta{constructor(a,b,c,d,e,f,g,k){this.c=new m(a,b);this.target=this.c.clone();this.u=this.c.clone();this.width=c;this.height=d;this.W=!1;this.ga=this.a=0;this.i=e;this.j=f;this.b=g;this.f=k}move(a,b,c){this.W||!this.b&&(0==this.c.x&&0>a||this.c.x==this.i-1&&0<a)||!this.f&&(0==this.c.y&&0>b||this.c.y==this.j-1&&0<b)||(this.a=1,this.ga=c,this.target.x=this.c.x+a|0,this.target.y=this.c.y+b|0,this.W=!0)}setPosition(a,b){this.c=new m(a,b);this.target=this.c.clone();this.u=this.c.clone()}};const ua=[1,4,8,2,9,6,3,5,12,10,7,13,14,11,15];
function va(a,b,c){var d=b.c.x/16|0,e=b.c.y/16|0;let f=d-2,g=e-2;d+=4;e+=4;for(let G=0;G<a.a.H.length-1;++G)for(let B=g;B<=e;++B)for(let v=f;v<=d;++v){var k=R(a.a,G,v,B);if(0!=k){var h=a.i.H[0][k-1];if(null!=h)if(0<h&&h<=ua.length){k=b;var p=v,l=B,n=c,x=ua[h-1|0];1==(x&1)&&pa(k,16*p,16*l,n);if(8==(x&8)){h=k;var u=16*p,y=16*(l+1);if(!(h.ca||!h.m||h.X||0<h.speed.y)){var z=h.c.x+h.f.x-h.l.x/2;z+h.l.x<=u+1||z>=u+16-1||(u=h.f.y-h.l.y/2,z=h.Y.y+u,h.c.y+u<=y+1*n.step&&z>=y-(2-h.speed.y)*n.step&&(h.c.y=y-
u,h.na(),h.speed.y=0))}}4==(x&4)&&qa(k,16*(p+1),16*l,-1,n);2==(x&2)&&qa(k,16*p,16*l,1,n)}else switch(k=b,p=h-1,l=v,n=B,h=c,y=[2,0,2,8],x=[8,2,0,2],u=[12,8,12,8],z=[8,12,8,12],p){case 15:void 0!=k.V&&k.V(16*l,16*n,16,16,h);break;case 16:case 17:case 18:case 19:void 0!=k.qa&&k.qa(16*l+y[p-16],16*n+x[p-16],u[p-16],z[p-16],h);break;case 27:void 0!=k.V&&k.V(16*l+8,16*n,16,16,h);break;case 29:void 0!=k.ia&&k.ia(16*l,16*n+8,16,8,h);break;case 30:void 0!=k.ia&&k.ia(16*l,16*n,16,16,h);break;case 31:pa(k,16*
l,16*(n+1),h),void 0!=k.V&&k.V(16*l,16*n+8,16,8,h,4)}}}}class wa{constructor(a){this.a=a.ma.base;this.i=a.ma.collisions;this.width=this.a.width;this.height=this.a.height;this.b=this.f=0}};function xa(a,b){a.K=!1;a.a=20;Z(a);b?a.j||(a.speed.x=1.25*a.R,a.target.x=a.speed.x):a.a+=10;a.da=b;a.A=0;a.B=0;a.ea=!0}
class ya extends ra{constructor(a,b,c){super(a,b);this.h=new X(16,16);this.Z=new X(16,16);this.o=0;this.v=new m(.1,.15);this.f=new m(0,2);this.i=new m(8,12);this.l=new m(6,12);this.I=!1;this.A=0;this.L=!1;this.D=0;this.N=this.S=this.j=!1;this.a=this.B=0;this.P=this.K=this.ea=!1;this.ba=0;this.J=this.da=!1;this.T=0;this.F=!1;this.pa=this.C=0;this.b=new sa(0,0,0,0,0,null);this.b.m=!1;this.R=1;this.U=this.M=0;this.progress=c}ja(a){this.S&&!this.j&&(this.S=!1);this.R=0==this.o?1:-1;var b=a.input.actions.fire2.state;
if(b=b==F||b==E)this.P&&b?(this.P=!1,this.ba=0,xa(this,!0)):!this.da&&0<this.a&&10>=this.a&&(this.a=0);if(!(0<this.a||this.J||0<this.U)){this.target.x=1*a.input.g.x;this.target.y=2;this.F&&(this.target.y*=.25);this.v=new m(.1,.15);a:{if(a.input.actions.fire2.state==J){if(!this.j&&!this.N&&!this.I&&.1<a.input.g.y){Z(this);this.speed.y=-3;this.target.y=4;this.v.y=.35;this.J=!0;this.T=0;b=!0;break a}if(this.K){xa(this,!1);b=!0;break a}}b=!1}if(b=!b)null!=this.b&&this.b.m?b=!1:(b=0==this.o?1:-1,a.input.actions.fire3.state==
J?(this.b=new sa(this.c.x+4*b,this.c.y+2,2*b,0,24,this),this.b.Y.x=this.c.x,Z(this),this.a=30,this.ea=!1,this.B=this.A=0,b=!0):b=!1),b=!b;if(b&&(this.N&&(this.v.x*=.5,this.v.y*=.25,this.target.x*=.5,this.target.y*=.25,this.F=!1,this.C=0),b=a.input.actions.fire1.state,this.j?(.1<a.input.g.x?this.o=0:-.1>a.input.g.x&&(this.o=1),this.target.y=.5*a.input.g.y,this.target.x=0,b==J&&(.1>a.input.g.y&&(this.A=14),this.S=this.j=this.L=!1),b=!0):b=!1,!b))if(b=a.input.actions.fire1.state,b==J)if(this.I&&.1<a.input.g.y)this.B=
20;else{if(this.I||0<this.D||!this.L||0<this.C)this.A=(this.L=!this.I&&0>=this.D&&0>=this.C)?8:14,this.I=!1,this.D=0,0<this.C&&(this.speed.x=-2*this.pa),this.F=!1,this.C=0,this.K=!0}else b==F&&(0<this.A?this.A=0:0<this.B&&(this.B=0))}0<this.A&&(this.speed.y=-2,this.N&&(this.speed.y*=.5),this.A-=a.step);0<this.B&&(this.speed.x=2*this.R,this.target.x=this.speed.x,this.B-=a.step);0<this.D&&(this.D-=a.step);0<this.C&&(this.C-=a.step);0<this.a&&(this.a-=a.step,!this.da&&this.ea&&0>=this.a&&(this.P=!0));
0<this.T&&0>=(this.T-=a.step)&&(this.J=!1);this.P&&(this.ba=(this.ba+a.step)%20);0<this.M&&(0<this.U?this.U-=a.step:this.M-=a.step);0<this.U?W(this.h,0,5):this.J?(W(this.Z,3,4),W(this.h,1,4)):0<this.a?(W(this.h,0,4),this.da?V(this.Z,4,7,8,4,a.step):W(this.Z,2,4)):0<this.B?W(this.h,4,1):(.1<Math.abs(this.target.x)&&(this.o=0>this.target.x?1:0),this.F?W(this.h,3,1):this.N?0<=this.speed.y&&.1<Math.abs(this.target.x)?V(this.h,3,0,1,10,a.step):(b=0>this.speed.y?2:0,W(this.h,b,3)):this.j?(3!=this.h.b||
.1<Math.abs(this.target.y))&&V(this.h,3,3,4,10,a.step):this.I?.1>Math.abs(this.speed.x)&&.1>Math.abs(this.target.x)?W(this.h,0,0):(b=12-6*Math.abs(this.speed.x),V(this.h,0,1,4,b,a.step)):this.L&&0>this.speed.y?V(this.h,2,0,4,4,a.step):(b=0,.5>Math.abs(this.speed.y)?b=1:0<this.speed.y&&(b=2),W(this.h,b,1)));null!=this.b&&na(this.b,a);this.N=this.j=!1}ha(){this.F=this.I=!1}aa(a){if(!(0<this.M&&0!=Math.floor(this.M/2)%2)){var b=this.h.a;this.P&&0==Math.floor(this.ba/2)%2&&(b+=5);var c=Math.round(this.c.x-
8),d=Math.round(this.c.y-7);if(0<this.a&&this.ea){var e=this.Z,f=e.width,g=e.height;C(a,a.s.figure,e.width*e.a,e.height*e.b,f,g,c+12-24*this.o,d+1,f,g,this.o)}e=this.h;f=e.width;g=e.height;C(a,a.s.figure,e.width*b,e.height*this.h.b,f,g,c,d,f,g,this.o);this.J&&(b=this.Z,e=b.width,f=b.height,C(a,a.s.figure,b.width*b.a,b.height*b.b,e,f,c+3-6*this.o,d+7,e,f,this.o));null!=this.b&&this.b.aa(a)}}oa(){this.I=!0;this.L=!1;this.D=12;.1<this.speed.y&&(this.S=this.j=!1);this.K=!0;this.J&&0>=this.T&&(this.T=
20);this.C=0;this.F=!1}ka(a,b){!this.j&&!this.J&&0>=this.a&&!this.N&&0<this.speed.y&&.1<b.input.g.x*a&&(this.F=!0,this.C=15,this.pa=a)}na(){this.A=0}V(a,b,c,d,e,f){if(!Y(this,a+4,b,c-8,d))return!1;if(this.S)return this.K=!0,void 0==f&&(this.j=!0),!0;c=0<e.input.g.y&&.25>=e.input.$.y&&.25<e.input.la.y;return 0>e.input.g.y&&-.25<=e.input.$.y&&-.25>e.input.la.y||c?(this.S=this.j=this.K=!0,this.c.x=a+8,void 0!=f&&(this.c.y=b+f),Z(this),!0):!1}ia(a,b,c,d){return Y(this,a,b,c,d)?(this.N=!0,this.D=1,this.L=
!1,this.B=0,this.K=!0):!1}qa(a,b,c,d){if(!(0<this.M))return Y(this,a,b,c,d)?(this.R=this.c.x<a+c/2?1:-1,this.o=0<this.R?0:1,this.M=60,this.U=30,this.target.x=0,this.speed.x=2*-this.R,this.j=!1,this.a=0,this.P=this.F=this.J=!1,a=this.progress,a.a=Math.max(0,a.a-2),!0):!1}};class za{constructor(a){this.a=null;this.progress=a}};class Aa{constructor(){this.a=this.b=6}};class Ba extends Q{constructor(a,b){super(a,b);console.log(a.G);this.a=new wa(a.G);this.b=new ta(0,0,160,144,this.a.width/10|0,this.a.height/9|0,!0,!1);this.progress=new Aa;this.f=new za(this.progress);var c=this.a;{a=this.f;b=c.a.H[c.a.H.length-1];var d=c.width;c=c.height;let e;for(let f=0;f<c;++f)for(let g=0;g<d;++g)if(e=b[f*d+g]-512,!(0>=e))switch(--e,e){case 0:a.a=new ya(16*g+8,16*f+8,a.progress)}}a=this.f;this.b.setPosition(a.a.c.x/160|0,a.a.c.y/144|0)}refresh(a){var b=this.a;b.f=(b.f+.5*a.step)%
96;b.b=(b.b+.125*a.step)%16;var c=this.f;b=this.b;var d=this.a;b.W||(na(c.a,a),va(d,c.a,a),null!=c.a.b&&va(d,c.a.b,a));{c=c.a;d=b.c.x*b.width;var e=b.c.y*b.height,f=b.target.x-b.c.x;let g=b.target.y-b.c.y,k=(c.i.x+2)*b.ga,h=(c.i.y+2)*b.ga,p=0,l=0;b.W?(c.c.x+=f*k*a.step,c.c.y+=g*h*a.step):(0<c.speed.x&&c.c.x+c.f.x+c.i.x/2>d+b.width?p=1:0>c.speed.x&&c.c.x+c.f.x-c.i.x/2<d?p=-1:0<c.speed.y&&c.c.y+c.f.y+c.i.y/2>e+b.height?l=1:0>c.speed.y&&c.c.y+c.f.y-c.i.y/2<e&&(l=-1),0==p&&0==l||b.move(p,l,.05));if(d=
null!=c.b&&c.b.m)d=c.b,void 0==d.h?b=!1:(e=b.u.x*b.width,f=b.u.y*b.height,b=d.c.x+d.h.width/2>=e&&d.c.y+d.h.height/2>=f&&d.c.x-d.h.width/2<e+b.width&&d.c.y-d.h.height/2<f+b.height),d=!b;d&&(c.b.m=!1)}b=this.b;b.W&&(0>=(b.a-=b.ga*a.step)?(b.a=0,b.c=b.target.clone(),b.u=b.c.clone(),b.W=!1,b.b&&(b.c.x=q(b.c.x|0,b.i)),b.f&&(b.c.y=q(b.c.y|0,b.j))):(a=b.a,b.u.x=a*b.c.x+(1-a)*b.target.x,b.u.y=a*b.c.y+(1-a)*b.target.y))}ra(a){a.moveTo(0,0);var b=this.b,c=q(this.a.f+16*b.u.x,96);a.clear(85,170,255);C(a,a.s.background,
16,32,48,48,96,16,48,48,0);b=16*b.u.y|0;a.move(0,-b);for(var d=0;3>d;++d)C(a,a.s.background,0,0,96,32,Math.round(-c+96*d),96,96,32,0);w(a,255,255,255);a.fillRect(0,128,a.width,16);for(c=0;c<a.width/16|0;++c)C(a,a.s.background,0,32,16,32,16*c,144,16,32,0);w(a,0,85,170);a.fillRect(0,176,a.width,Math.max(0,a.height+b-176));a.move(0,b);c=this.b;a.moveTo(-Math.round(c.u.x*c.width),-Math.round(c.u.y*c.height));{c=this.a;d=this.b;b=(10*d.u.x|0)-1;let z=(9*d.u.y|0)-1,G=(a.width/16|0)+2,B=(a.height/16|0)+
2;for(let v=0;v<c.a.H.length-1;++v){{var e=void 0,f=void 0,g=void 0;d=c;var k=a,h=a.s.tileset,p=v,l=b,n=z,x=G,u=B;const Ca=[133];for(let H=n;H<n+u;++H)for(let I=l;I<l+x;++I)if(g=R(d.a,p,I,H),0!=g--)if(Ca.includes(g)){{let L,A;f=k;e=h;var y=I;let O=g%16|0,ja=g/16|0;switch(g){case 133:L=16*H+(1+Math.round(Math.sin(d.b/16*Math.PI*2))),A=d.b|0,A%2!=L%2&&++O,g=16-A,C(f,e,16*O+A,16*ja,g,16,16*y,L,g,16,0),0<A&&C(f,e,16*O,16*ja,A,16,16*(y+1)-A,L,A,16,0)}}}else f=g%16|0,e=g/16|0,C(k,h,16*f,16*e,16,16,16*I,
16*H,16,16,0)}}}this.f.a.aa(a);a.moveTo();c=a.s.font;for(d=0;d<this.progress.b;++d)b=9*(d/2|0),0==d%2&&C(a,c,40,0,8,8,1+b,1,8,8,void 0),this.progress.a>d&&C(a,c,32+d%2*4,0,4,8,1+b+d%2*4,1,4,8,void 0)}};window.onload=()=>{var a=new ma(160,144,0);a.G.load("assets/assets.json");var b=[{name:"fire1",key:"KeyZ",O:0},{name:"fire2",key:"KeyX",O:2},{name:"fire3",key:"KeyC",O:1},{name:"start",key:"Enter",O:9,fa:7},{name:"back",key:"Escape"}];for(let c of b)P(a.a.input,c.name,c.key,c.O,c.fa);a.i=Ba;a.j=!1;U(a,0)};
